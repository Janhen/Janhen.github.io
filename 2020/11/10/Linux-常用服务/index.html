<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Linux 常用服务 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="SSH 默认安装好客户端，对于海外的服务器进行转发有时连接效果较好  配置配置文件存放在 ~&#x2F;.ssh&#x2F;config 文件中 1vim ~&#x2F;.ssh&#x2F;config  端口更改 123Port&#x3D;1022service sshd restart  12345# 如果 60s 内没用任何数据,将会自动断开。vim &#x2F;etc&#x2F;ssh&#x2F;ssh_config#添加ServerAliveInterval 60S">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 常用服务">
<meta property="og:url" content="http://example.com/2020/11/10/Linux-%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="SSH 默认安装好客户端，对于海外的服务器进行转发有时连接效果较好  配置配置文件存放在 ~&#x2F;.ssh&#x2F;config 文件中 1vim ~&#x2F;.ssh&#x2F;config  端口更改 123Port&#x3D;1022service sshd restart  12345# 如果 60s 内没用任何数据,将会自动断开。vim &#x2F;etc&#x2F;ssh&#x2F;ssh_config#添加ServerAliveInterval 60S">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-11-10T13:21:25.000Z">
<meta property="article:modified_time" content="2020-12-17T04:35:07.744Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Linux-常用服务" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/10/Linux-%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time datetime="2020-11-10T13:21:25.000Z" itemprop="datePublished">2020-11-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Linux 常用服务
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><blockquote>
<p>默认安装好客户端，对于海外的服务器进行转发有时连接效果较好</p>
</blockquote>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>配置文件存放在 <code>~/.ssh/config</code> 文件中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/config</span><br></pre></td></tr></table></figure>

<p>端口更改</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Port=1022</span><br><span class="line"></span><br><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 如果 60s 内没用任何数据,将会自动断开。</span></span><br><span class="line">vim /etc/ssh/ssh_config</span><br><span class="line"><span class="meta">#</span><span class="bash">添加</span></span><br><span class="line">ServerAliveInterval 60</span><br><span class="line">ServerAliveCountMax 3</span><br></pre></td></tr></table></figure>

<p>禁止密码登陆，可避密码泄漏</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 禁用root账户登录(非必要)</span></span><br><span class="line">PermitRootLogin no</span><br><span class="line"><span class="meta">#</span><span class="bash"> 是否允许用户自行使用成对的密钥系统进行登入行为</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line"><span class="meta">#</span><span class="bash"> 是否让 sshd 去检查用户home目录的权限数据</span></span><br><span class="line">StrictModes no</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys</span><br><span class="line"><span class="meta">#</span><span class="bash"> 禁止密码登录</span></span><br><span class="line">PasswordAuthentication no </span><br></pre></td></tr></table></figure>



<p><strong>SSH 免密码密钥认证</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将公钥传递给远程 root </span></span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub root@linux121</span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub root@linux122</span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub root@linux123</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定端口传递</span></span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub -oPort=6000 root@127.0.0.1</span><br></pre></td></tr></table></figure>



<p><strong>SSH 文件传输</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 通过 SSH 复制远程服务器指定文件到本地</span></span><br><span class="line">scp root@linux121:/root/frp_0.13.0_linux_amd64.tar.gz frp.tar.gz</span><br></pre></td></tr></table></figure>



<p><strong>SSH 连接执行命令</strong></p>
<p>连接上指定的机器，同时执行指定的命令，封装 zookeeper 集群的启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;start zookeeper server...&quot;</span><br><span class="line"><span class="meta">if(($</span><span class="bash"><span class="comment">#==0));</span></span></span><br><span class="line">then echo &quot;no params&quot;;</span><br><span class="line">exit;</span><br><span class="line">fi</span><br><span class="line">hosts=&quot;linux121 linux122 linux123&quot;</span><br><span class="line"></span><br><span class="line">for host in $hosts</span><br><span class="line">do ssh $host &quot;source /etc/profile; $1&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h2 id="crond"><a href="#crond" class="headerlink" title="crond"></a>crond</h2><blockquote>
<p>Linux 自带的定时调度服务</p>
</blockquote>
<h3 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h3><p><strong>查看用户的定时任务</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看当前用户的定时任务</span></span><br><span class="line">crontab -l</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看指定用户的定时任务</span></span><br><span class="line">crontab -u &lt;username&gt; -l</span><br></pre></td></tr></table></figure>



<p><strong>按照时间查看定时任务</strong></p>
<p>查看每日的任务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -la /etc/cron.daily/</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x.  2 root root 4096 Sep 14 15:16 .</span><br><span class="line">drwxr-xr-x. 76 root root 4096 Nov 10 21:15 ..</span><br><span class="line">-rwx------.  1 root root  219 Apr  1  2020 logrotate</span><br><span class="line">-rwxr-xr-x.  1 root root  618 Oct 30  2018 man-db.cron</span><br></pre></td></tr></table></figure>

<p>查看每小时的任务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -la /etc/cron.hourly/</span><br></pre></td></tr></table></figure>

<p>查看每周的任务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -la /etc/cron.weekly/</span><br></pre></td></tr></table></figure>

<p>查看每月的任务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -la /etc/cron.monthly/</span><br></pre></td></tr></table></figure>

<p><strong>查看 <code>/etc/crontab</code></strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less /etc/crontab</span><br></pre></td></tr></table></figure>

<p><strong>查看任务执行日志</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f /var/log/cron</span><br></pre></td></tr></table></figure>



<h3 id="定义任务"><a href="#定义任务" class="headerlink" title="定义任务"></a>定义任务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+---------------- minute (0 - 59)</span><br><span class="line">|  +------------- hour (0 - 23)</span><br><span class="line">|  |  +---------- day of month (1 - 31)</span><br><span class="line">|  |  |  +------- month (1 - 12)</span><br><span class="line">|  |  |  |  +---- day of week (0 - 6) (Sunday&#x3D;0 or 7)</span><br><span class="line">|  |  |  |  |</span><br><span class="line">*  *  *  *  *  command to be executed</span><br></pre></td></tr></table></figure>



<p>定时删除日志</p>
<p>每天凌晨2点删除 <code>/usr/apps/logs</code> 目录下7天前包含 log 的日志文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 * * * &#x2F;usr&#x2F;bin&#x2F;find &#x2F;usr&#x2F;apps&#x2F;logs&#x2F; -type f -mtime +7 -name &quot;*log*&quot; -exec rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure>



<h2 id="journal"><a href="#journal" class="headerlink" title="journal"></a>journal</h2><blockquote>
<p>日志查看服务</p>
</blockquote>
<p>Linux 日志分类</p>
<ul>
<li><p>内核及系统日志： 日志数据由系统服务 syslog 统一管理</p>
</li>
<li><p>用户日志：这种日志数据用于记录 Linux 系统用户登录及退出系统的相关信息</p>
</li>
<li><p>程序日志：有些应用程序运会选择自己来独立管理一份日志文件, 通过配置日志格式和回滚策略</p>
</li>
</ul>
<p>Linux 中常用日志文件</p>
<ul>
<li><p>/var/log/cron： 与定时任务相关的日志信息</p>
</li>
<li><p>/var/log/maillog： 与邮件相关的日志信息</p>
</li>
<li><p>/var/log/secure： 与安全相关的日志信息, 可基于此日志过滤攻击的 IP</p>
</li>
<li><p>/var/log/boot.log： 守护进程启动和停止相关的日志消息</p>
</li>
<li><p><code>/var/log/messages</code> / <code>/var/log/syslog</code>：  存储所有的全局系统活动数据,包括启动、IO错误、网络错误、程序故障等 /varlog/dmesg：记录Linux系统在引导过程中的各种事件信息</p>
</li>
<li><p>/var/log/lastlog：最近几次成功登录事件和最后一次不成功登录事件</p>
</li>
<li><p>/var/log/wtmp：记录每个用户登录、注销及系统启动和停机事件</p>
</li>
<li><p>/var/log/rpmpkgs： RPM软件包日志</p>
</li>
<li><p>/var/log/kern： 存储内核的错误和警告数据，用于排除与定制内核相关的故障</p>
</li>
<li><p>/var/log/btmp： 记录错误的登陆尝试</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -f -n 1000</span><br></pre></td></tr></table></figure>



<h2 id="logrotate"><a href="#logrotate" class="headerlink" title="logrotate"></a>logrotate</h2><blockquote>
<p>日志回滚服务</p>
</blockquote>
<p>/etc/logrotate.d/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tree &#x2F;etc&#x2F;logrotate.d</span><br><span class="line">&#x2F;etc&#x2F;logrotate.d</span><br><span class="line">├── bootlog</span><br><span class="line">├── chrony</span><br><span class="line">├── ppp</span><br><span class="line">├── subscription-manager</span><br><span class="line">├── syslog</span><br><span class="line">├── vsftpd</span><br><span class="line">├── wpa_supplicant</span><br><span class="line">└── yum</span><br></pre></td></tr></table></figure>



<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>配合 cron 实现日志的分割压缩处理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logrotate /etc/logrotate.d/nginx</span><br><span class="line">logrotate -d /etc/logrotate.d/nginx</span><br><span class="line">logrotate -vf /etc/logrotate.d/nginx</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/var/log/nginx/access_log &#123;</span><br><span class="line">    rotate 7</span><br><span class="line">    size 5k</span><br><span class="line">    dateext</span><br><span class="line">    dateformat -%Y-%m-%d</span><br><span class="line">    missingok</span><br><span class="line">    compress</span><br><span class="line">    sharedscripts</span><br><span class="line">    postrotate</span><br><span class="line">        test -r /var/run/nginx.pid &amp;&amp; kill -USR1 `cat /var/run/nginx.pid`</span><br><span class="line">    endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://serverfault.com/questions/427144/how-to-limit-nginx-access-log-file-size-and-compress">How to limit nginx access log file size and compress?</a></p>
<h2 id="firewalld"><a href="#firewalld" class="headerlink" title="firewalld"></a>firewalld</h2><p>防火墙状态查看</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure>



<h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">iptables -nvL  </span><br><span class="line">  </span><br><span class="line"><span class="meta">#</span><span class="bash"> 开放指定的端口</span></span><br><span class="line">iptables -I INPUT -p tcp --dport 9000 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 暴露docker swarm需要的端口，如果不使用docker swarm不需要打开端口</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 2377 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 7946 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp --dport 7946 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 4789 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp --dport 4789 -j ACCEPT</span><br></pre></td></tr></table></figure>



<h2 id="ntpd"><a href="#ntpd" class="headerlink" title="ntpd"></a>ntpd</h2><blockquote>
<p>时间同步工具</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install ntp</span><br><span class="line">ntpdate time.pool.aliyun.com</span><br><span class="line">systemctl enable ntpd</span><br></pre></td></tr></table></figure>

<p>三台机器时钟同步</p>
<p>时间同步的⽅式：在集群中找⼀台机器，作为时间服务器。 通过⽹络连接外⽹进⾏时钟同步, 此台机器需要保证能连上外⽹。</p>
<p>集群中其他机器与这台机器定时的同步时间，每隔一段时间(⼗分钟)同步⼀次时间。</p>
<p>1.时间服务器配置（必须root⽤户）</p>
<p>第⼀步:确定是否安装了ntpd的服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ntpd</span><br></pre></td></tr></table></figure>

<p>启动ntpd的服务 service ntpd start 设置ntpd的服务开机启动 chkconfig ntpd on</p>
<p>第⼀步:确定是否安装了ntpd的服务 rpm -qa | grep ntpd</p>
<p>第⼆步:编辑/etc/ntp.conf</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">编辑第⼀台机器的/etc/ntp.conf</span><br><span class="line">vim /etc/ntp.conf </span><br><span class="line"><span class="meta">#</span><span class="bash"> 在⽂件中添加如下内容 </span></span><br><span class="line">restrict 192.168.80.0 mask 255.255.255.0 nomodify</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 注释⼀下四⾏内容 </span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 0.centos.pool.ntp.org </span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 1.centos.pool.ntp.org </span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 2.centos.pool.ntp.org </span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 3.centos.pool.ntp.org </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 去掉以下内容的注释，如果没有这两⾏注释，那就⾃⼰添加上 </span></span><br><span class="line">server 127.127.1.0 # local clock </span><br><span class="line">fudge 127.127.1.0 stratum 10</span><br></pre></td></tr></table></figure>

<p>配置以下内容，保证BIOS与系统时间同步添加⼀⾏内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconﬁg/ntpd</span><br><span class="line">SYNC_HWLOCK=yes</span><br></pre></td></tr></table></figure>

<p>第三步：</p>
<p>重新启动ntpd</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service ntpd status</span><br><span class="line">service ntpd start</span><br></pre></td></tr></table></figure>

<p>使NTP服务可以在系统引导的时候⾃动启动 ：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig ntpd on</span><br></pre></td></tr></table></figure>

<p>2.其他机器配置（必须root⽤户）</p>
<p>第⼀步：在其他机器配置10分钟与时间服务器同步⼀次</p>
<p>crontab -e 编写脚本 另外两台机器与192.168.80.121进⾏时钟同步</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/10 * * * * /usr/sbin/ntpdate 192.168.80.121</span><br></pre></td></tr></table></figure>

<p>第⼆步：修改任意机器时间, 进行验证</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date -s &quot;2020-12-31 11:11:11&quot;</span><br></pre></td></tr></table></figure>

<p>第三步：⼗分钟后查看机器是否与时间服务器同步</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/10/Linux-%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1/" data-id="ckisst70s000a63fs9hre0leu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/11/10/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Linux 常用命令
        
      </div>
    </a>
  
  
    <a href="/2020/11/10/Hive-%E5%AE%89%E8%A3%85/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hive 安装</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">算法与数据结构</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hadoop/" rel="tag">Hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hive/" rel="tag">Hive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hadoop/" style="font-size: 20px;">Hadoop</a> <a href="/tags/Hive/" style="font-size: 10px;">Hive</a> <a href="/tags/Leetcode/" style="font-size: 10px;">Leetcode</a> <a href="/tags/Linux/" style="font-size: 13.33px;">Linux</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 10px;">大数据</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">工具</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 16.67px;">算法</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/12/17/Percona-Toolkit/">Percona-Toolkit</a>
          </li>
        
          <li>
            <a href="/2020/12/17/Blog/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/12/17/Kafka/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/11/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">设计模式-单例模式</a>
          </li>
        
          <li>
            <a href="/2020/11/10/React-HOC/">React HOC</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>